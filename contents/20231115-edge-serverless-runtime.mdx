---
title: 'edge-runtime ã¨ node-runtime ã®èª¬æ˜ãŒã‚ã‹ã‚Šã¥ã‚‰ã„'
publishedAt: '2023-11-15'
summary: 'NextJSå…¬å¼ã«æ›¸ã„ã¦ã‚ã‚‹ edge-runtime ã¨ node-runtime ãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„ã€‚'
thumbnail: 'ğŸ¤”'
---

[Next.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes)ã«è¨˜è¼‰ã•ã‚Œã¦ã‚ã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã¤ã„ã¦ã®èª¬æ˜ãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„ã€‚ï¼ˆè‡ªåˆ†ã ã‘ã‹ã‚‚ã—ã‚Œãªã„ï¼‰

## çµè«–

Edge Runtime ã‚‚ Serverless Node.js ã‚‚ä¸€æ‹¬ã‚Šã«ã™ã‚Œã°ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€‚ï¼ˆNode ã¯åå‰ã®é€šã‚Šã€æ™®é€šã® Node.js Runtimeï¼‰

<Image
  alt='Google'
  src='/images/20231115-edge-serverless-runtime/tableImage.png'
  width={1190}
  height={108}
/>

ã¤ã„ã§ã«ã€Edge Runtime ã¨ Serverless Node.js Runtime ã«ã¤ã„ã¦èª¿ã¹ãŸã®ã§å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¦ãŠãã€‚

## Serverless Node.js

[Serverless Functions Overview | Vercel Docs](https://vercel.com/docs/functions/serverless-functions)

### Pros

- Edge Runtime ã‚ˆã‚Šã‚‚è¤‡é›‘ãªè¨ˆç®—è² è·ã‚’å‡¦ç†ã§ãã‚‹ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ã€‚
- Vercel ã® Serverless Functions ã§ã¯ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ã¦ã€å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºã¯ 50MB ã¾ã§å¯¾å¿œå¯èƒ½ã€‚

### Cons

- Serverless Function ã¯**ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã§ã€æœ€å¤§å®Ÿè¡Œæ™‚é–“ãŒã‚ã‚‹**ãŸã‚ã€Websocket é€šä¿¡ã‚’[ç¶­æŒã™ã‚‹äº‹ã¯å‡ºæ¥ãªã„](https://vercel.com/guides/do-vercel-serverless-functions-support-websocket-connections)ã€‚
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹ã¾ã§ã«æ•°ç™¾ãƒŸãƒªç§’ã®èµ·å‹•æ™‚é–“ãŒã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚‹
- ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯é‡(ã‚¢ã‚¯ã‚»ã‚¹æ•°)ã«ã‚ˆã£ã¦ã¯ã€ã“ã¡ã‚‰å´ã§åˆ¶å¾¡ã§ããªã„ï¼ˆVercelå´ãŒæ¡ã£ã¦ã‚‹ï¼‰ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ãŒè½ã¡ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

Serverless Function ã«ãŠã‘ã‚‹æœ€å¤§å®Ÿè¡Œæ™‚é–“ã¯ä»¥ä¸‹ã®é€šã‚Šï¼ˆ[å…¬å¼](https://vercel.com/pricing)ï¼‰

Hobby : 10 seconds
Pro : 300 seconds
EnterPrice : 900 seconds

### ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ API

- [API Routes](https://nextjs-ja-translation-docs.vercel.app/docs/api-routes/introduction)

- [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)

## Edge Runtime

å¯¾ã—ã¦ã¯ Edge Runtime ã¯ã€Serverless Node.js ã‚ˆã‚Šè»½é‡ãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’æŒã¤ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ã§ã‚ã‚‹ã€‚**ä¿—ã«è¨€ã†ã€CDN ã‚¨ãƒƒã‚¸ã‚µãƒ¼ãƒãƒ¼ã€‚**

ãã®ä»–ã®CDNã‚µãƒ¼ãƒãƒ¼ã¨åŒæ§˜ã§ç‰¹å¾´ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºã®ä¸Šé™ãŒå°ã•ãã€ãƒ¡ãƒ¢ãƒªå®¹é‡ã‚‚å°ã•ãã€ã™ã¹ã¦ã® Node.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã€‚

ã¾ãŸã€Edge Runtime ã¯ã€**Edge Functions ã¨ Edge Middleware ã®ï¼’ã¤ã§åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚**

<NoteCard>
  Edgeãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã¨EdgeãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ä½¿ç”¨ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ã‚»ãƒƒãƒˆã‚’æä¾›ã™ã‚‹Node.jsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦ã€`vercel/edge`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚‹ã€‚[å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://vercel.com/docs/functions/edge-functions/vercel-edge-package)
</NoteCard>

### Pros

- ãƒªã‚¯ã‚¨ã‚¹ãƒˆå…ƒã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ©Ÿæ¢°ã®ã§ãã‚‹ã ã‘è¿‘ãã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—å‡ºæ¥ã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã¯ã»ã¼ã»ã¼ãªã„ã€‚
- CDN ã®ãŸã‚ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚„ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚‚ã¨ã¦ã‚‚è‰¯ã„ã€‚(ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚‚åŠ¹ç‡ã‚ˆãæŒã)
- ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ UX ãŒè‰¯ã„ã€‚[å…¬å¼](https://vercel.com/blog/gpt-3-app-next-js-vercel-edge-functions#edge-functions-with-streaming)

### Cons

- Vercel ä¸Šã® Edge Runtime ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ 1~4MB ã§æŠ‘ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å¤šãã®å®Ÿè£…ã§åˆ¶é™ã‚’è¶…ãˆã‚‹å ´åˆãŒã‚ã‚‹ã€‚

### Edge Functions

> OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å®Ÿè¡Œã€ã‚¦ã‚§ãƒ–ãƒ•ãƒƒã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ã®å¿œç­”ã€çŸ­ã„åˆ¶é™æ™‚é–“å†…ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå®Œäº†ã—ãªã„ã¨å¤±æ•—ã™ã‚‹ API ã¨ã®ã‚„ã‚Šå–ã‚Šãªã©ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§å¯èƒ½ãªé™ã‚Šé«˜é€Ÿã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚

config å¤‰æ•°ã‚’å®šç¾©ã—ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ `edge` ã«è¨­å®šã™ã‚‹ã ã‘ã§ã€API ãƒ«ãƒ¼ãƒˆã‚’ Edge Function ã¨ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```tsx
export const config =  {
 runtime: "edge"ã€
};
```

[Edge Functions Overview | Vercel Docs](https://vercel.com/docs/functions/edge-functions)

### Edge Middleware

- [ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ API](https://vercel.com/docs/functions/edge-middleware/middleware-api) ã¯ã€FetchEventã€Responseã€Request ãªã©ã® Web æ¨™æº– API ã‚’æ‹¡å¼µã—ãŸ Edge Runtime ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚ï¼ˆ[Edge Middleware](https://vercel.com/docs/functions/edge-middleware)ã¨ã‚‚å‘¼ã°ã‚Œã‚‹ã€‚ï¼‰
- Edge Middleware ã‚’ç”¨ã„ãŸ[å…¬å¼ example](https://github.com/vercel/examples/tree/main/edge-middleware)ã‚‚ã‚ã‚‹ã€‚

[Edge Middleware Overview | Vercel Docs](https://vercel.com/docs/functions/edge-middleware)

### ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ API

- [API Reference: Edge Runtime | Next.js](https://nextjs.org/docs/app/api-reference/edge)
